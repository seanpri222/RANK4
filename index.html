<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>RANK 4</title>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Outfit:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
<style>
* { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

:root {
  --ink:    #0C0C0C;
  --paper:  #F6F4EF;
  --white:  #FFFFFF;
  --muted:  #9B9690;
  --edge:   #E3E0D8;
  --lift:   #EDEAE3;
  --c0: #E8391E;
  --c1: #F59E0B;
  --c2: #0EA572;
  --c3: #2F54EB;
  --ok:     #059669;
  --ok-tint:#DCFCE7;
  --fail:   #DC2626;
  --warn:   #B45309;
}

body {
  background: var(--paper);
  color: var(--ink);
  font-family: 'Outfit', sans-serif;
  min-height: 100vh;
  overflow-x: hidden;
}

/* ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ */
.header {
  position: sticky; top: 0; z-index: 200;
  background: var(--ink);
  height: 58px;
  display: flex; align-items: center; justify-content: space-between;
  padding: 0 22px;
}
.logo {
  font-family: 'Bebas Neue', sans-serif;
  font-size: 2.1rem; letter-spacing: 7px; line-height: 1; color: white;
}
.logo-r{color:var(--c0)}.logo-a{color:var(--c1)}.logo-n{color:var(--c2)}.logo-k{color:var(--c3)}
.header-right { display: flex; align-items: center; gap: 14px; }
.header-date { font-size: 0.62rem; font-weight: 600; letter-spacing: 1.5px; text-transform: uppercase; color: rgba(255,255,255,0.4); }
.btn-help {
  font-family: 'Outfit', sans-serif; font-size: 0.72rem; font-weight: 700;
  background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2);
  border-radius: 100px; padding: 5px 14px; color: rgba(255,255,255,0.7);
  cursor: pointer; transition: all 0.15s;
}
.btn-help:hover { background: rgba(255,255,255,0.18); color: white; }

/* ‚îÄ‚îÄ HERO ‚îÄ‚îÄ */
.hero {
  background: var(--ink); padding: 32px 22px 38px;
  position: relative; overflow: hidden;
}
.hero::before {
  content: ''; position: absolute; inset: 0; pointer-events: none;
  background:
    radial-gradient(ellipse 60% 80% at 10% 60%, rgba(232,57,30,0.18) 0%, transparent 60%),
    radial-gradient(ellipse 55% 70% at 90% 20%, rgba(47,84,235,0.18) 0%, transparent 60%),
    radial-gradient(ellipse 50% 60% at 55% 90%, rgba(14,165,114,0.14) 0%, transparent 55%);
}
.hero::after {
  content: ''; position: absolute; inset: 0; pointer-events: none;
  background-image: radial-gradient(circle, rgba(255,255,255,0.06) 1px, transparent 1px);
  background-size: 20px 20px;
}
.hero-inner { position: relative; z-index: 1; max-width: 840px; margin: 0 auto; }
.hero-eyebrow {
  display: inline-flex; align-items: center; gap: 7px;
  font-size: 0.58rem; font-weight: 700; letter-spacing: 3px;
  text-transform: uppercase; color: rgba(255,255,255,0.35); margin-bottom: 8px;
}
.hero-eyebrow::before { content: ''; width: 18px; height: 1.5px; background: rgba(255,255,255,0.22); flex-shrink: 0; }
.hero-heading {
  font-family: 'Bebas Neue', sans-serif; font-size: clamp(2.2rem, 6vw, 3.8rem);
  letter-spacing: 2px; color: white; line-height: 1; margin-bottom: 6px;
}
.hero-sub { font-size: 0.78rem; font-weight: 500; color: rgba(255,255,255,0.35); margin-bottom: 28px; }
.hero-cards { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; }
.hero-card {
  border-radius: 16px; padding: 20px 12px 18px; text-align: center;
  border: 1.5px solid rgba(255,255,255,0.1); cursor: default;
  transition: transform 0.2s ease, border-color 0.2s; position: relative; overflow: hidden;
}
.hero-card:nth-child(1){background:rgba(232,57,30,0.14);border-color:rgba(232,57,30,0.28)}
.hero-card:nth-child(2){background:rgba(245,158,11,0.13);border-color:rgba(245,158,11,0.25)}
.hero-card:nth-child(3){background:rgba(14,165,114,0.13);border-color:rgba(14,165,114,0.25)}
.hero-card:nth-child(4){background:rgba(47,84,235,0.13);border-color:rgba(47,84,235,0.25)}
.hero-card:hover{transform:translateY(-3px)}
.hero-card::before {
  content: ''; position: absolute; top: 0; left: 0; right: 0; height: 3px; border-radius: 16px 16px 0 0;
}
.hero-card:nth-child(1)::before{background:var(--c0)}.hero-card:nth-child(2)::before{background:var(--c1)}
.hero-card:nth-child(3)::before{background:var(--c2)}.hero-card:nth-child(4)::before{background:var(--c3)}
.hero-card-emoji { font-size: 2.2rem; display: block; margin-bottom: 10px; line-height: 1; filter: drop-shadow(0 2px 6px rgba(0,0,0,0.4)); }
.hero-card-name { display: block; font-size: 0.79rem; font-weight: 700; color: rgba(255,255,255,0.9); line-height: 1.25; }

/* ‚îÄ‚îÄ PROGRESS BAR ‚îÄ‚îÄ */
.progress-bar { background: var(--white); border-bottom: 1.5px solid var(--edge); padding: 10px 22px; }
.progress-bar-inner { max-width: 840px; margin: 0 auto; display: flex; align-items: center; gap: 12px; }
.progress-label { font-size: 0.58rem; font-weight: 700; letter-spacing: 1.5px; text-transform: uppercase; color: var(--muted); white-space: nowrap; }
.progress-pips { display: flex; gap: 5px; flex: 1; }
.pip { flex: 1; height: 5px; border-radius: 3px; background: var(--edge); transition: background 0.4s ease; }
.pip.lit-0{background:var(--c0)}.pip.lit-1{background:var(--c1)}.pip.lit-2{background:var(--c2)}.pip.lit-3{background:var(--c3)}
.progress-checks {
  display: flex; align-items: center; gap: 7px;
  font-size: 0.58rem; font-weight: 700; letter-spacing: 1px; text-transform: uppercase; color: var(--muted);
}
.check-pips { display: flex; gap: 4px; }
.check-pip { width: 10px; height: 10px; border-radius: 50%; background: var(--edge); transition: background 0.3s; }
.check-pip.used { background: var(--fail); }
.check-pip.remaining { background: var(--ink); }
.progress-pair { display: flex; align-items: center; gap: 6px; font-size: 0.58rem; font-weight: 700; letter-spacing: 1px; text-transform: uppercase; color: var(--muted); }
.pair-pip { width: 22px; height: 5px; border-radius: 3px; background: var(--edge); transition: background 0.4s ease; }
.pair-pip.lit { background: var(--ok); }

/* ‚îÄ‚îÄ MAIN ‚îÄ‚îÄ */
.main { max-width: 840px; margin: 0 auto; padding: 20px 16px 80px; }

/* ‚îÄ‚îÄ PAIR FINDER ‚îÄ‚îÄ */
.pair-box {
  background: var(--white); border-radius: 16px; border: 2px solid var(--ink);
  overflow: hidden; margin-bottom: 18px; box-shadow: 3px 3px 0 var(--ink);
}
.pair-head { background: var(--ink); padding: 12px 18px; display: flex; align-items: center; gap: 10px; }
.pair-head-icon { font-size: 1rem; }
.pair-head-text { flex: 1; }
.pair-head-title { font-size: 0.85rem; font-weight: 800; color: white; line-height: 1; margin-bottom: 2px; }
.pair-head-hint { font-size: 0.65rem; font-weight: 500; color: rgba(255,255,255,0.42); }
.pair-body { padding: 14px 18px 18px; }
.pair-pills { display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 14px; }
.pair-pill {
  border: 2px solid; border-radius: 100px; padding: 7px 18px;
  font-size: 0.73rem; font-weight: 700;
  cursor: pointer; transition: all 0.14s ease;
  background: var(--white); user-select: none;
}
.pair-pill:hover:not([disabled]) { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.12); }
.pair-pill[disabled] { cursor: default; }
.pair-pill.pp0{border-color:var(--c0);color:var(--c0)}.pair-pill.pp1{border-color:var(--c1);color:var(--c1)}
.pair-pill.pp2{border-color:var(--c2);color:var(--c2)}.pair-pill.pp3{border-color:var(--c3);color:var(--c3)}
.pair-pill.pp0.sel{background:var(--c0);color:white;box-shadow:0 4px 14px rgba(232,57,30,0.4)}
.pair-pill.pp1.sel{background:var(--c1);color:white;box-shadow:0 4px 14px rgba(245,158,11,0.4)}
.pair-pill.pp2.sel{background:var(--c2);color:white;box-shadow:0 4px 14px rgba(14,165,114,0.4)}
.pair-pill.pp3.sel{background:var(--c3);color:white;box-shadow:0 4px 14px rgba(47,84,235,0.4)}
.pair-pill.linked-done{opacity:0.55;cursor:default;color:white!important}
.pair-pill.pp0.linked-done{background:var(--c0)}.pair-pill.pp1.linked-done{background:var(--c1)}
.pair-pill.pp2.linked-done{background:var(--c2)}.pair-pill.pp3.linked-done{background:var(--c3)}
.pair-foot { display: flex; align-items: center; gap: 12px; flex-wrap: wrap; }
.btn-link {
  font-family: 'Outfit', sans-serif; font-size: 0.76rem; font-weight: 800;
  padding: 9px 22px; border: 2px solid var(--ink); border-radius: 100px;
  background: var(--ink); color: white; cursor: pointer; transition: all 0.14s;
}
.btn-link:hover:not([disabled]) { background: #252525; transform: translateY(-1px); box-shadow: 0 5px 16px rgba(0,0,0,0.25); }
.btn-link[disabled] { opacity: 0.25; cursor: not-allowed; transform: none!important; box-shadow: none!important; }
.pair-msg { font-size: 0.75rem; font-weight: 600; color: var(--muted); flex: 1; min-height: 18px; }
.pair-msg.ok{color:var(--ok)}.pair-msg.err{color:var(--fail)}
.linked-badge {
  display: none; margin-top: 12px; align-items: center; gap: 10px;
  background: var(--ok-tint); border: 1.5px solid #86EFAC;
  border-radius: 10px; padding: 12px 16px;
  font-size: 0.8rem; font-weight: 700; color: var(--ok);
}
.linked-badge.show { display: flex; }

/* Wrong pair feedback panel */
.pair-wrong-reveal {
  display: none; margin-top: 14px;
  background: #FEF9F0; border: 1.5px solid #FBBF24;
  border-radius: 12px; padding: 14px 16px;
}
.pair-wrong-reveal.show { display: block; }
.pair-wrong-title {
  font-size: 0.72rem; font-weight: 800; color: var(--warn); letter-spacing: 0.5px;
  margin-bottom: 10px; display: flex; align-items: center; gap: 6px;
}
.pair-wrong-rows { display: flex; flex-direction: column; gap: 8px; }
.pair-wrong-row { display: flex; align-items: flex-start; gap: 10px; }
.pair-wrong-label {
  font-size: 0.65rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px;
  min-width: 110px; padding-top: 6px;
}
.pair-wrong-tiles { display: flex; gap: 5px; align-items: center; flex-wrap: wrap; }
.pwt {
  font-size: 0.7rem; font-weight: 600; padding: 5px 10px;
  border-radius: 8px; border: 1.5px solid var(--edge); background: var(--white);
}
.pwt.wrong { background: #FEE2E2; border-color: #FCA5A5; color: var(--fail); font-weight: 700; }
.pwt.should-be { background: var(--ok-tint); border-color: #86EFAC; color: var(--ok); font-weight: 700; }
.pwr-arrow { color: #CBD5E1; font-size: 0.75rem; }
.swap-hint {
  font-size: 0.65rem; font-weight: 600; color: #92400E;
  margin-top: 10px; padding-top: 10px; border-top: 1px solid #FDE68A;
  display: flex; align-items: center; gap: 5px;
}

/* ‚îÄ‚îÄ CATEGORY CARDS ‚îÄ‚îÄ */
.cats-list { display: flex; flex-direction: column; gap: 12px; }
.cat-block {
  background: var(--white); border-radius: 16px; border: 1.5px solid var(--edge);
  overflow: hidden; animation: riseIn 0.45s cubic-bezier(0.22,1,0.36,1) both;
  transition: box-shadow 0.2s, border-color 0.2s; box-shadow: 0 1px 4px rgba(0,0,0,0.04);
}
.cat-block:hover{box-shadow:0 6px 20px rgba(0,0,0,0.07)}
.cat-block:nth-child(1){animation-delay:0.06s}.cat-block:nth-child(2){animation-delay:0.12s}
.cat-block:nth-child(3){animation-delay:0.18s}.cat-block:nth-child(4){animation-delay:0.24s}
.cat-block.correct{border-color:#86EFAC;box-shadow:0 4px 20px rgba(14,165,114,0.12)}
.cat-block.wrong-flash{animation:shake 0.35s ease!important}
.cat-topbar{height:4px}
.cat-block.b0 .cat-topbar{background:var(--c0)}.cat-block.b1 .cat-topbar{background:var(--c1)}
.cat-block.b2 .cat-topbar{background:var(--c2)}.cat-block.b3 .cat-topbar{background:var(--c3)}
.cat-block.correct .cat-topbar{background:var(--ok)}
.cat-header { display: flex; align-items: center; justify-content: space-between; padding: 12px 14px; gap: 12px; }
.cat-block.b0:not(.correct) .cat-header{background:#FFF3F1}
.cat-block.b1:not(.correct) .cat-header{background:#FFFBEB}
.cat-block.b2:not(.correct) .cat-header{background:#F0FDF8}
.cat-block.b3:not(.correct) .cat-header{background:#EEF2FF}
.cat-block.correct .cat-header{background:#F0FDF4}
.cat-header-left{display:flex;align-items:center;gap:10px;flex:1}
.cat-swatch{width:9px;height:9px;border-radius:50%;flex-shrink:0}
.cat-block.b0 .cat-swatch{background:var(--c0)}.cat-block.b1 .cat-swatch{background:var(--c1)}
.cat-block.b2 .cat-swatch{background:var(--c2)}.cat-block.b3 .cat-swatch{background:var(--c3)}
.cat-block.correct .cat-swatch{background:var(--ok)}
.cat-name{font-family:'Bebas Neue',sans-serif;font-size:1.05rem;letter-spacing:2px;line-height:1}
.cat-block.b0 .cat-name{color:var(--c0)}.cat-block.b1 .cat-name{color:var(--c1)}
.cat-block.b2 .cat-name{color:var(--c2)}.cat-block.b3 .cat-name{color:var(--c3)}
.cat-block.correct .cat-name{color:var(--ok)}
.cat-desc{font-size:0.62rem;font-weight:500;color:var(--muted);margin-top:1px}
.cat-header-right{display:flex;align-items:center;gap:9px;flex-shrink:0}
.star-slot{font-size:1.15rem;line-height:1;filter:grayscale(1);opacity:0.15;transition:all 0.35s cubic-bezier(0.34,1.56,0.64,1)}
.star-slot.lit{filter:none;opacity:1;animation:starPop 0.5s cubic-bezier(0.34,1.56,0.64,1) both}

/* Check button */
.btn-check {
  font-family:'Outfit',sans-serif; font-size:0.68rem; font-weight:700;
  padding:7px 14px; border-radius:100px; border:2px solid;
  background:transparent; cursor:pointer; transition:all 0.14s; white-space:nowrap;
}
.cat-block.b0 .btn-check{border-color:var(--c0);color:var(--c0)}
.cat-block.b1 .btn-check{border-color:var(--c1);color:var(--c1)}
.cat-block.b2 .btn-check{border-color:var(--c2);color:var(--c2)}
.cat-block.b3 .btn-check{border-color:var(--c3);color:var(--c3)}
.cat-block.b0 .btn-check:hover:not([disabled]){background:var(--c0);color:white}
.cat-block.b1 .btn-check:hover:not([disabled]){background:var(--c1);color:white}
.cat-block.b2 .btn-check:hover:not([disabled]){background:var(--c2);color:white}
.cat-block.b3 .btn-check:hover:not([disabled]){background:var(--c3);color:white}
.btn-check[disabled]{opacity:0.3;cursor:not-allowed}
.btn-check.is-correct{color:var(--ok)!important;border-color:#6EE7B7!important;background:var(--ok-tint)!important}
.btn-check.is-wrong{color:var(--fail)!important;border-color:#FCA5A5!important}
.btn-check.no-checks{color:var(--muted)!important;border-color:var(--edge)!important;background:var(--lift)!important;opacity:0.7}

/* ‚îÄ‚îÄ RANK ROW ‚Äî NO horizontal scroll, wraps on mobile ‚îÄ‚îÄ */
.rank-row {
  display: flex; align-items: stretch;
  padding: 14px 12px 10px; gap: 0;
  /* KEY FIX: no overflow-x: auto ‚Äî use CSS grid/flex wrap instead */
  user-select: none; -webkit-user-select: none;
}

/* Each entry takes equal width, tiles stay same height */
.rank-entry {
  display: flex; flex-direction: column; align-items: center; gap: 5px;
  flex: 1; min-width: 0; /* allow shrinking */
}
.rank-num { font-size: 0.56rem; font-weight: 700; letter-spacing: 1px; color: var(--muted); text-transform: uppercase; }

/* Tile height is fixed so swapping doesn't resize the row ‚Üí no page jump */
.rank-tile {
  width: 100%;
  height: 64px; /* FIXED height ‚Äî prevents layout jumps */
  background: var(--lift); border: 1.5px solid var(--edge); border-radius: 12px;
  display: flex; align-items: center; justify-content: center;
  font-size: 0.72rem; font-weight: 600; text-align: center; padding: 6px 4px; line-height: 1.25;
  cursor: grab; touch-action: none;
  transition: background 0.12s, border-color 0.12s, box-shadow 0.12s, transform 0.12s;
  position: relative;
  background-image: radial-gradient(circle, var(--edge) 1px, transparent 1px);
  background-size: 8px 8px;
  background-position: calc(100% - 5px) 5px;
  background-repeat: no-repeat;
  background-color: var(--lift);
  will-change: transform;
  /* Prevent content reflow jumping ‚Äî use visibility trick instead of opacity for dragging */
  overflow: hidden;
}
.rank-tile:hover { background-color: var(--edge); border-color: #C5C0B8; }
.rank-tile.dragging { opacity: 0.2; transform: scale(0.95); box-shadow: none; }
.rank-tile.drag-over { border-color: var(--c3); border-style: dashed; background-color: #EEF2FF; box-shadow: 0 0 0 3px rgba(47,84,235,0.15); transform: scale(1.03); }
.correct .rank-tile { background-color: var(--ok-tint); background-image: none; border-color: #86EFAC; cursor: default; touch-action: auto; }
.rank-tile.locked {
  background-color: var(--ok-tint) !important; background-image: none !important;
  border-color: #86EFAC !important; cursor: default !important; touch-action: auto !important;
  color: var(--ok); font-weight: 700;
  box-shadow: 0 0 0 2px rgba(14,165,114,0.2);
}
.rank-tile.locked::after { content: '‚úì'; position: absolute; top: 4px; right: 6px; font-size: 0.55rem; color: var(--ok); font-weight: 800; }

/* Arrow between tiles ‚Äî hidden on very small screens */
.rank-arrow { color: var(--edge); font-size: 0.75rem; flex-shrink: 0; align-self: flex-start; margin-top: 34px; padding: 0 1px; }

/* Facts displayed BELOW each tile */
.item-fact {
  font-size: 0.57rem; font-weight: 600; color: transparent; text-align: center;
  line-height: 1.3; width: 100%; padding: 0 2px;
  min-height: 18px; /* reserve space so height doesn't change on reveal */
  transition: color 0.3s ease 0.2s;
}
.item-fact.revealed { color: var(--ok); }

/* Ghost tile */
.drag-ghost {
  position: fixed; pointer-events: none; z-index: 9999;
  background: var(--ink); color: white;
  border-radius: 12px; padding: 10px 14px;
  font-family: 'Outfit', sans-serif; font-size: 0.78rem; font-weight: 700;
  box-shadow: 0 8px 24px rgba(0,0,0,0.35);
  transform: rotate(2deg) scale(1.05);
  transition: none; white-space: nowrap;
  max-width: 140px; text-align: center; line-height: 1.2;
}

/* ‚îÄ‚îÄ CHECKS TOAST ‚îÄ‚îÄ */
.checks-toast {
  position: fixed; bottom: 24px; left: 50%; transform: translateX(-50%);
  background: var(--ink); color: white; border-radius: 100px;
  padding: 10px 22px; font-size: 0.78rem; font-weight: 700;
  z-index: 500; opacity: 0; pointer-events: none;
  transition: opacity 0.3s ease;
  white-space: nowrap;
}
.checks-toast.show { opacity: 1; }

/* ‚îÄ‚îÄ FOOTER ‚îÄ‚îÄ */
.footer { display: flex; justify-content: center; padding: 26px 0 0; }
.btn-footer-help {
  font-family: 'Outfit', sans-serif; font-size: 0.7rem; font-weight: 600;
  background: none; border: 1.5px solid var(--edge); border-radius: 100px;
  padding: 7px 18px; color: var(--muted); cursor: pointer; transition: all 0.15s;
}
.btn-footer-help:hover { border-color: var(--ink); color: var(--ink); }

/* ‚îÄ‚îÄ RESULTS ‚îÄ‚îÄ */
.results-screen{display:none;animation:riseIn 0.5s cubic-bezier(0.22,1,0.36,1) both}
.results-screen.show{display:block}
.results-card { background:var(--ink); border-radius:20px; overflow:hidden; margin-bottom:18px; border:2px solid var(--ink); box-shadow:4px 4px 0 var(--ink); }
.results-card-stripe { height:6px; background:linear-gradient(90deg,var(--c0) 0%,var(--c1) 33%,var(--c2) 66%,var(--c3) 100%); }
.results-card-stripe.fail { background: linear-gradient(90deg,#7F1D1D,#DC2626,#7F1D1D); }
.results-card-body { padding:36px 24px 32px; text-align:center; position:relative; overflow:hidden; }
.results-card-body::before {
  content:''; position:absolute; inset:0; pointer-events:none;
  background: radial-gradient(ellipse 50% 70% at 12% 40%,rgba(232,57,30,0.2) 0%,transparent 55%),
              radial-gradient(ellipse 50% 70% at 88% 20%,rgba(47,84,235,0.2) 0%,transparent 55%);
}
.results-card-body.fail::before {
  background: radial-gradient(ellipse 60% 80% at 20% 50%,rgba(220,38,38,0.25) 0%,transparent 60%),
              radial-gradient(ellipse 50% 60% at 80% 30%,rgba(127,29,29,0.2) 0%,transparent 60%);
}
.results-logo { font-family:'Bebas Neue',sans-serif; font-size:2.8rem; letter-spacing:8px; position:relative; margin-bottom:4px; }
.results-fail-icon { font-size:3.2rem; margin-bottom:10px; position:relative; }
.results-fail-heading { font-family:'Bebas Neue',sans-serif; font-size:2.2rem; letter-spacing:3px; color:white; position:relative; margin-bottom:6px; }
.results-fail-sub { font-size:0.82rem; font-weight:500; color:rgba(255,255,255,0.45); margin-bottom:24px; position:relative; line-height:1.6; }
.results-date { font-size:0.62rem; font-weight:600; letter-spacing:2.5px; text-transform:uppercase; color:rgba(255,255,255,0.32); margin-bottom:24px; position:relative; }
.stars-row { display:flex; justify-content:center; gap:5px; margin-bottom:8px; position:relative; }
.res-star { font-size:2.1rem; animation:starPop 0.5s cubic-bezier(0.34,1.56,0.64,1) both; }
.results-score { font-size:0.72rem; font-weight:600; letter-spacing:2px; text-transform:uppercase; color:rgba(255,255,255,0.32); margin-bottom:24px; position:relative; }
.share-box {
  background:rgba(255,255,255,0.07); border:1.5px solid rgba(255,255,255,0.12);
  border-radius:12px; padding:16px 20px;
  font-family:monospace; font-size:0.8rem; line-height:1.85; white-space:pre;
  color:rgba(255,255,255,0.82); display:inline-block; text-align:left;
  margin-bottom:14px; position:relative; max-width:100%;
}
.results-share-prompt {
  font-size: 0.75rem; font-weight: 600;
  color: rgba(255,255,255,0.45); margin-bottom: 14px; position: relative;
}
.results-share-prompt a { color: rgba(255,255,255,0.7); text-decoration: underline; }
.btn-copy {
  display:block; margin:0 auto;
  background:white; color:var(--ink); border:none; border-radius:100px;
  padding:11px 30px; font-family:'Outfit',sans-serif; font-size:0.8rem; font-weight:800;
  cursor:pointer; transition:all 0.14s; position:relative;
}
.btn-copy:hover { background:#EDEDED; transform:translateY(-1px); box-shadow:0 5px 16px rgba(0,0,0,0.25); }
.fail-answer-reveal { background:rgba(255,255,255,0.06); border:1.5px solid rgba(255,255,255,0.12); border-radius:14px; padding:18px 20px; margin-bottom:14px; position:relative; text-align:left; }
.fail-answer-label { font-size:0.58rem; font-weight:700; letter-spacing:2.5px; text-transform:uppercase; color:rgba(255,255,255,0.35); margin-bottom:14px; }
.fail-answer-row { margin-bottom:10px; }
.fail-answer-row:last-child { margin-bottom:0; }
.fail-cat-name { font-size:0.65rem; font-weight:700; letter-spacing:1px; text-transform:uppercase; margin-bottom:5px; display:flex; align-items:center; gap:6px; }
.fail-pills { display:flex; gap:5px; flex-wrap:wrap; align-items:center; }
.fail-pill { background:rgba(255,255,255,0.1); border:1.5px solid rgba(255,255,255,0.15); border-radius:100px; padding:4px 11px; font-size:0.7rem; font-weight:600; color:rgba(255,255,255,0.8); }
.fail-pill.pair-pill-match { background:rgba(14,165,114,0.2); border-color:rgba(134,239,172,0.4); color:#86EFAC; }
.fail-arrow { font-size:0.7rem; color:rgba(255,255,255,0.2); }
.fail-match-badge { font-size:0.5rem; font-weight:800; letter-spacing:1px; padding:2px 7px; border-radius:4px; background:rgba(14,165,114,0.3); color:#86EFAC; text-transform:uppercase; border:1px solid rgba(134,239,172,0.3); }

/* ‚îÄ‚îÄ ANSWERS SECTION ‚Äî facts shown under each item ‚îÄ‚îÄ */
.answers-section { background:var(--white); border:1.5px solid var(--edge); border-radius:16px; padding:20px; }
.answers-label { font-size:0.58rem; font-weight:700; letter-spacing:2.5px; text-transform:uppercase; color:var(--muted); margin-bottom:16px; }
.answer-rows { display:flex; flex-direction:column; gap:16px; }
.answer-row-item { display:flex; gap:10px; align-items:flex-start; flex-wrap:wrap; }
.answer-cat-label { font-size:0.66rem; font-weight:700; letter-spacing:0.5px; text-transform:uppercase; min-width:130px; padding-top:5px; display:flex; align-items:center; gap:7px; flex-shrink: 0; }
.answer-pills { display:flex; gap:5px; align-items:flex-start; flex-wrap:wrap; }
/* Each pill now has a fact underneath it */
.answer-pill-wrap { display:flex; flex-direction:column; align-items:center; gap:3px; }
.answer-item-pill { background:var(--lift); border:1.5px solid var(--edge); border-radius:100px; padding:4px 11px; font-size:0.7rem; font-weight:600; white-space:nowrap; }
.answer-item-fact { font-size:0.58rem; font-weight:600; color:var(--ok); text-align:center; line-height:1.2; max-width:90px; }
.ans-arrow { font-size:0.7rem; color:var(--edge); padding-top:6px; }
.match-flag { font-size:0.5rem; font-weight:800; letter-spacing:1px; padding:2px 7px; border-radius:4px; background:var(--ink); color:white; text-transform:uppercase; }

/* ‚îÄ‚îÄ OVERLAY ‚îÄ‚îÄ */
.overlay {
  display:none; position:fixed; inset:0; background:rgba(12,12,12,0.65);
  z-index:400; align-items:center; justify-content:center; backdrop-filter:blur(5px);
}
.overlay.show{display:flex}
.overlay-card {
  background:var(--white); border-radius:20px; padding:30px 28px 24px;
  max-width:420px; width:92%; animation:riseIn 0.3s cubic-bezier(0.22,1,0.36,1) both;
  border:2px solid var(--ink); box-shadow:6px 6px 0 var(--ink);
  max-height:90vh; overflow-y:auto;
}
.overlay-title { font-family:'Bebas Neue',sans-serif; font-size:2rem; letter-spacing:3px; margin-bottom:18px; }
.overlay-steps { display:flex; flex-direction:column; gap:12px; margin-bottom:22px; }
.overlay-step { display:flex; align-items:flex-start; gap:12px; }
.step-num { width:24px; height:24px; border-radius:7px; background:var(--ink); color:white; display:flex; align-items:center; justify-content:center; font-size:0.7rem; font-weight:800; flex-shrink:0; margin-top:2px; }
.step-text { font-size:0.78rem; font-weight:500; color:#444; line-height:1.55; }
.step-text strong { color:var(--ink); font-weight:800; }
.btn-play { width:100%; padding:13px; background:var(--ink); color:white; border:none; border-radius:100px; font-family:'Outfit',sans-serif; font-size:0.85rem; font-weight:800; cursor:pointer; transition:background 0.14s; }
.btn-play:hover{background:#252525}

/* ‚îÄ‚îÄ ANIMATIONS ‚îÄ‚îÄ */
@keyframes riseIn { from{opacity:0;transform:translateY(20px)} to{opacity:1;transform:translateY(0)} }
@keyframes shake {
  0%,100%{transform:translateX(0)} 20%{transform:translateX(-8px)}
  40%{transform:translateX(8px)} 60%{transform:translateX(-4px)} 80%{transform:translateX(4px)}
}
@keyframes starPop {
  from{transform:scale(0) rotate(-30deg);opacity:0} 65%{transform:scale(1.45) rotate(8deg)}
  to{transform:scale(1) rotate(0);opacity:1}
}
@keyframes correctPulse {
  0%{box-shadow:0 0 0 0 rgba(14,165,114,0.5)} 70%{box-shadow:0 0 0 10px rgba(14,165,114,0)} 100%{box-shadow:0 0 0 0 rgba(14,165,114,0)}
}
.cat-block.correct{animation:correctPulse 0.7s ease both 0.05s}

/* ‚îÄ‚îÄ MOBILE ‚îÄ‚îÄ */
@media(max-width:580px){
  .hero-cards{grid-template-columns:repeat(2,1fr);gap:8px}
  .hero{padding:24px 14px 30px}
  .hero-heading{font-size:1.9rem}
  .header{padding:0 14px}
  .main{padding:16px 10px 70px}
  .pair-pill{font-size:0.68rem;padding:6px 13px}
  .progress-bar{padding:9px 14px}
  .pair-wrong-label{min-width:90px}
  .hero-card-emoji{font-size:1.9rem}

  /* Rank row: tiles flow side by side with NO scroll ‚Äî shrink font/size */
  .rank-row { padding: 12px 8px 8px; gap: 0; }
  .rank-tile {
    font-size: 0.6rem;
    height: 56px;
    border-radius: 9px;
    padding: 4px 2px;
  }
  .rank-arrow { font-size: 0.6rem; margin-top: 28px; padding: 0; }
  .rank-num { font-size: 0.5rem; }
  .item-fact { font-size: 0.5rem; min-height: 16px; }

  /* Answer section on mobile */
  .answer-cat-label { min-width: 100px; }
  .answer-item-fact { font-size: 0.53rem; max-width: 70px; }
}

@media(max-width:400px){
  .rank-tile { font-size: 0.55rem; height: 50px; }
  .rank-arrow { margin-top: 25px; }
}
</style>
</head>
<body>

<!-- HEADER -->
<header class="header">
  <div class="logo">
    <span class="logo-r">R</span><span class="logo-a">A</span><span class="logo-n">N</span><span class="logo-k">K</span>&nbsp;4
  </div>
  <div class="header-right">
    <span class="header-date" id="headerDate"></span>
    <button class="btn-help" id="btnHelp">How to play</button>
  </div>
</header>

<!-- HERO -->
<section class="hero" id="heroSection">
  <div class="hero-inner">
    <div class="hero-eyebrow">Today's puzzle</div>
    <div class="hero-heading">Today's Items</div>
    <div class="hero-sub">Rank all four across four categories &mdash; then find the matching pair</div>
    <div class="hero-cards" id="heroCards"></div>
  </div>
</section>

<!-- PROGRESS -->
<div class="progress-bar" id="progressBar">
  <div class="progress-bar-inner">
    <span class="progress-label">Categories</span>
    <div class="progress-pips" id="progressPips"></div>
    <div class="progress-checks">
      Checks
      <div class="check-pips" id="checkPips"></div>
    </div>
    <div class="progress-pair">
      Pair <div class="pair-pip" id="pairPip"></div>
    </div>
  </div>
</div>

<!-- MAIN -->
<main class="main">

  <!-- Pair Finder -->
  <div class="pair-box" id="pairBox">
    <div class="pair-head">
      <span class="pair-head-icon">üîó</span>
      <div class="pair-head-text">
        <div class="pair-head-title">Find the Matching Pair</div>
        <div class="pair-head-hint">Two categories share the exact same order ‚Äî which ones?</div>
      </div>
    </div>
    <div class="pair-body">
      <div class="pair-pills" id="pairPills"></div>
      <div class="pair-foot">
        <button class="btn-link" id="btnLink" disabled>Link Pair ‚Üí</button>
        <span class="pair-msg" id="pairMsg">Select two categories above</span>
      </div>
      <div class="linked-badge" id="linkedBadge">
        <span>üîó</span><span id="linkedText"></span>
      </div>
      <div class="pair-wrong-reveal" id="pairWrongReveal">
        <div class="pair-wrong-title">‚ö†Ô∏è Close! Here's what each category actually ranked:</div>
        <div class="pair-wrong-rows" id="pairWrongRows"></div>
        <div class="swap-hint" id="swapHint"></div>
      </div>
    </div>
  </div>

  <!-- Categories -->
  <div class="cats-list" id="catsList"></div>

  <div class="footer">
    <button class="btn-footer-help" onclick="document.getElementById('helpOverlay').classList.add('show')">How to play</button>
  </div>

  <!-- Results: WIN -->
  <div class="results-screen" id="resultsScreen">
    <div class="results-card">
      <div class="results-card-stripe" id="resultsStripe"></div>
      <div class="results-card-body" id="resultsCardBody">
        <!-- Win content -->
        <div id="winContent">
          <div class="results-logo">
            <span style="color:var(--c0)">R</span><span style="color:var(--c1)">A</span><span style="color:var(--c2)">N</span><span style="color:var(--c3)">K</span><span style="color:rgba(255,255,255,0.9)"> 4</span>
          </div>
          <div class="results-date" id="resultsDate"></div>
          <div class="stars-row" id="starsRow"></div>
          <div class="results-score" id="scoreLabel"></div>
          <div class="share-box" id="shareBox"></div>
          <div class="results-share-prompt">Play at <a href="https://seanpri222.github.io/RANK4/" target="_blank">seanpri222.github.io/RANK4</a></div>
          <button class="btn-copy" id="btnCopy">Copy Result</button>
        </div>
        <!-- Fail content -->
        <div id="failContent" style="display:none">
          <div class="results-fail-icon">üíî</div>
          <div class="results-fail-heading">Unlucky!</div>
          <div class="results-fail-sub" id="failSub"></div>
          <div class="results-date" id="resultsDateFail"></div>
          <div class="share-box" id="shareBoxFail"></div>
          <div class="results-share-prompt">Play at <a href="https://seanpri222.github.io/RANK4/" target="_blank">seanpri222.github.io/RANK4</a></div>
          <button class="btn-copy" id="btnCopyFail">Copy Result</button>
        </div>
      </div>
    </div>
    <div class="answers-section" id="answersSection">
      <div class="answers-label">Today's Correct Orders</div>
      <div class="answer-rows" id="answerRows"></div>
    </div>
  </div>

</main>

<!-- Checks toast -->
<div class="checks-toast" id="checksToast"></div>

<!-- How to Play Overlay -->
<div class="overlay" id="helpOverlay" onclick="if(event.target===this)this.classList.remove('show')">
  <div class="overlay-card">
    <div class="overlay-title">How to Play</div>
    <div class="overlay-steps">
      <div class="overlay-step">
        <div class="step-num">1</div>
        <div class="step-text">You have <strong>4 items</strong> and <strong>4 ranking categories</strong>. Drag items to rank them ‚Äî <strong>1st = least, 4th = most</strong>.</div>
      </div>
      <div class="overlay-step">
        <div class="step-num">2</div>
        <div class="step-text">You have <strong>3 Check Order attempts</strong> shared across all categories. Use them wisely ‚Äî a ‚≠ê lights up when a row is correct.</div>
      </div>
      <div class="overlay-step">
        <div class="step-num">3</div>
        <div class="step-text">Exactly <strong>two categories share the same ranking order</strong>. Select both in the pair finder and hit <strong>Link Pair</strong> ‚Äî this ends the game.</div>
      </div>
      <div class="overlay-step">
        <div class="step-num">4</div>
        <div class="step-text"><strong>Guess the pair correctly ‚Üí you win!</strong> If your linked order matches the correct pair, you get <strong>4/4 stars</strong> ‚Äî no Check needed. Guess wrong ‚Üí game over.</div>
      </div>
    </div>
    <button class="btn-play" onclick="document.getElementById('helpOverlay').classList.remove('show')">Let's go!</button>
  </div>
</div>

<script>
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// PUZZLE DATA
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const PUZZLES = [
  {
    items: ['A4 Paper','Pencil','Elephant','Moon'],
    categories: [
      { label:'WEIGHT',     desc:'Lightest ‚Üí Heaviest',       order:['A4 Paper','Pencil','Elephant','Moon'] },
      { label:'LENGTH',     desc:'Shortest ‚Üí Longest',        order:['Pencil','A4 Paper','Elephant','Moon'] },
      { label:'VALUE IN $', desc:'Cheapest ‚Üí Most Expensive', order:['A4 Paper','Pencil','Elephant','Moon'] },
      { label:'AGE',        desc:'Oldest ‚Üí Newest',           order:['Moon','Elephant','A4 Paper','Pencil'] },
    ],
    matchingPair:[0,2]
  },
  {
    items: ['Ant','Tennis Ball','Blue Whale','Eiffel Tower'],
    categories: [
      { label:'WEIGHT',       desc:'Lightest ‚Üí Heaviest',        order:['Ant','Tennis Ball','Blue Whale','Eiffel Tower'] },
      { label:'POPULATION',   desc:'Fewest ‚Üí Most in Existence', order:['Eiffel Tower','Blue Whale','Tennis Ball','Ant'] },
      { label:'AGE',          desc:'Newest ‚Üí Oldest',            order:['Eiffel Tower','Tennis Ball','Blue Whale','Ant'] },
      { label:'MARKET VALUE', desc:'Cheapest ‚Üí Most Expensive',  order:['Ant','Tennis Ball','Blue Whale','Eiffel Tower'] },
    ],
    matchingPair:[0,3]
  },
  {
    items: ['Strawberry','Basketball','School Bus','Eiffel Tower'],
    categories: [
      { label:'WEIGHT',         desc:'Lightest ‚Üí Heaviest',          order:['Strawberry','Basketball','School Bus','Eiffel Tower'] },
      { label:'HEIGHT',         desc:'Shortest ‚Üí Tallest',           order:['Strawberry','Basketball','School Bus','Eiffel Tower'] },
      { label:'INVENTION DATE', desc:'Most Recent ‚Üí Oldest',         order:['Basketball','Eiffel Tower','School Bus','Strawberry'] },
      { label:'COST PER KG',    desc:'Cheapest ‚Üí Most Expensive/kg', order:['Eiffel Tower','School Bus','Strawberry','Basketball'] },
    ],
    matchingPair:[0,1]
  },
  {
    items: ['Golf Ball','Dolphin','Boeing 747','Burj Khalifa'],
    categories: [
      { label:'WEIGHT',     desc:'Lightest ‚Üí Heaviest',        order:['Golf Ball','Dolphin','Boeing 747','Burj Khalifa'] },
      { label:'HEIGHT',     desc:'Shortest ‚Üí Tallest',         order:['Golf Ball','Dolphin','Boeing 747','Burj Khalifa'] },
      { label:'AGE',        desc:'Newest ‚Üí Oldest',            order:['Burj Khalifa','Boeing 747','Golf Ball','Dolphin'] },
      { label:'MAX SPEED',  desc:'Slowest ‚Üí Fastest',          order:['Burj Khalifa','Dolphin','Golf Ball','Boeing 747'] },
    ],
    matchingPair:[0,1]
  },
  {
    items: ['Postage Stamp','Human Brain','Double Decker Bus','Amazon River'],
    categories: [
      { label:'WEIGHT',      desc:'Lightest ‚Üí Heaviest',  order:['Postage Stamp','Human Brain','Double Decker Bus','Amazon River'] },
      { label:'LENGTH',      desc:'Shortest ‚Üí Longest',   order:['Postage Stamp','Human Brain','Double Decker Bus','Amazon River'] },
      { label:'TEMPERATURE', desc:'Coldest ‚Üí Hottest',    order:['Postage Stamp','Amazon River','Human Brain','Double Decker Bus'] },
      { label:'AGE',         desc:'Newest ‚Üí Oldest',      order:['Double Decker Bus','Postage Stamp','Human Brain','Amazon River'] },
    ],
    matchingPair:[0,1]
  },
  {
    items: ['Snowflake','Violin','Rocket','Amazon Rainforest'],
    categories: [
      { label:'WEIGHT',      desc:'Lightest ‚Üí Heaviest', order:['Snowflake','Violin','Rocket','Amazon Rainforest'] },
      { label:'LENGTH',      desc:'Shortest ‚Üí Longest',  order:['Snowflake','Violin','Rocket','Amazon Rainforest'] },
      { label:'TEMPERATURE', desc:'Coldest ‚Üí Hottest',   order:['Snowflake','Violin','Amazon Rainforest','Rocket'] },
      { label:'SPEED',       desc:'Slowest ‚Üí Fastest',   order:['Amazon Rainforest','Violin','Snowflake','Rocket'] },
    ],
    matchingPair:[0,1]
  },
];

const FACTS = [
  [
    {'A4 Paper':'~5 g','Pencil':'~10 g','Elephant':'~4,000 kg','Moon':'7.3√ó10¬≤¬≤ kg'},
    {'Pencil':'~19 cm','A4 Paper':'29.7 cm','Elephant':'~6 m long','Moon':'3,474 km √ò'},
    {'A4 Paper':'~$0.01','Pencil':'~$0.50','Elephant':'~$30,000','Moon':'incalculable'},
    {'Moon':'~4.5 B yrs','Elephant':'~60 M yrs','A4 Paper':'std. 1975','Pencil':'inv. 1565'},
  ],
  [
    {'Ant':'~1 mg','Tennis Ball':'~58 g','Blue Whale':'~150,000 kg','Eiffel Tower':'~7,300 t'},
    {'Eiffel Tower':'1 original','Blue Whale':'~15,000 alive','Tennis Ball':'~300 M/yr','Ant':'~20 quadrillion'},
    {'Eiffel Tower':'built 1889','Tennis Ball':'inv. ~1870s','Blue Whale':'~5 M yrs','Ant':'~100 M yrs'},
    {'Ant':'~$0','Tennis Ball':'~$3','Blue Whale':'~$1 M','Eiffel Tower':'~$480 B'},
  ],
  [
    {'Strawberry':'~12 g','Basketball':'~620 g','School Bus':'~10,000 kg','Eiffel Tower':'~7,300 t'},
    {'Strawberry':'~3 cm','Basketball':'~24 cm √ò','School Bus':'~3.5 m tall','Eiffel Tower':'330 m'},
    {'Basketball':'inv. 1891','Eiffel Tower':'built 1889','School Bus':'1827','Strawberry':'~1300s'},
    {'Eiffel Tower':'~$7/kg','School Bus':'~$10/kg','Strawberry':'~$42/kg','Basketball':'~$48/kg'},
  ],
  [
    {'Golf Ball':'~45 g','Dolphin':'~200 kg','Boeing 747':'~178,000 kg','Burj Khalifa':'~500,000 t'},
    {'Golf Ball':'4.3 cm √ò','Dolphin':'~3 m','Boeing 747':'~19 m tall','Burj Khalifa':'828 m'},
    {'Burj Khalifa':'opened 2010','Boeing 747':'first flight 1969','Golf Ball':'inv. ~1400s','Dolphin':'~10 M yrs'},
    {'Burj Khalifa':'0 km/h','Dolphin':'~60 km/h','Golf Ball':'~290 km/h','Boeing 747':'~988 km/h'},
  ],
  [
    {'Postage Stamp':'~0.2 g','Human Brain':'~1.4 kg','Double Decker Bus':'~12,000 kg','Amazon River':'~10¬π‚Å¥ kg'},
    {'Postage Stamp':'~2.5 cm','Human Brain':'~16 cm','Double Decker Bus':'~10 m','Amazon River':'6,992 km'},
    {'Postage Stamp':'~20 ¬∞C','Amazon River':'~28 ¬∞C','Human Brain':'~37 ¬∞C','Double Decker Bus':'~90 ¬∞C'},
    {'Double Decker Bus':'~1895','Postage Stamp':'1840','Human Brain':'~300 k yrs','Amazon River':'~11 M yrs'},
  ],
  [
    {'Snowflake':'~0.003 mg','Violin':'~400 g','Rocket':'~2.9 M kg','Amazon Rainforest':'~200 B t'},
    {'Snowflake':'~1‚Äì5 mm','Violin':'~60 cm','Rocket':'~110 m','Amazon Rainforest':'~3,300 km wide'},
    {'Snowflake':'‚â§ 0 ¬∞C','Violin':'~20 ¬∞C','Amazon Rainforest':'~27 ¬∞C','Rocket':'~3,300 ¬∞C'},
    {'Amazon Rainforest':'0 km/h','Violin':'~3.6 km/h','Snowflake':'~5 km/h','Rocket':'~28,000 km/h'},
  ],
];

const EMOJIS = [
  {'A4 Paper':'üìÑ','Pencil':'‚úèÔ∏è','Elephant':'üêò','Moon':'üåô'},
  {'Ant':'üêú','Tennis Ball':'üéæ','Blue Whale':'üêã','Eiffel Tower':'üóº'},
  {'Strawberry':'üçì','Basketball':'üèÄ','School Bus':'üöå','Eiffel Tower':'üóº'},
  {'Golf Ball':'‚õ≥','Dolphin':'üê¨','Boeing 747':'‚úàÔ∏è','Burj Khalifa':'üèóÔ∏è'},
  {'Postage Stamp':'üìÆ','Human Brain':'üß†','Double Decker Bus':'üöé','Amazon River':'üåä'},
  {'Snowflake':'‚ùÑÔ∏è','Violin':'üéª','Rocket':'üöÄ','Amazon Rainforest':'üåø'},
];

const MAX_CHECKS = 3;
const CAT_COLORS = ['var(--c0)','var(--c1)','var(--c2)','var(--c3)'];
const WEBSITE_URL  = 'https://seanpri222.github.io/RANK4/';
const WEBSITE_DISP = 'seanpri222.github.io/RANK4';

let puzzle, state, pidx;

function getPuzzleIdx() {
  const d = new Date();
  return Math.floor((d - new Date(d.getFullYear(),0,0)) / 86400000) % PUZZLES.length;
}

function shuffle(arr) {
  const a = [...arr];
  for (let i = a.length-1; i>0; i--) {
    const j = Math.floor(Math.random()*(i+1));
    [a[i],a[j]] = [a[j],a[i]];
  }
  if (a.join() === arr.join()) [a[0],a[1]] = [a[1],a[0]];
  return a;
}

function initGame() {
  pidx = getPuzzleIdx();
  puzzle = PUZZLES[pidx];
  const emojis = EMOJIS[pidx] || {};
  const now = new Date();

  const dateLong = now.toLocaleDateString('en-GB',{day:'numeric',month:'long',year:'numeric'}).toUpperCase();
  document.getElementById('headerDate').textContent =
    now.toLocaleDateString('en-GB',{weekday:'short',day:'numeric',month:'short',year:'numeric'}).toUpperCase();
  document.getElementById('resultsDate').textContent     = dateLong;
  document.getElementById('resultsDateFail').textContent = dateLong;

  document.getElementById('heroCards').innerHTML = puzzle.items.map(item => `
    <div class="hero-card">
      <span class="hero-card-emoji">${emojis[item]||'üì¶'}</span>
      <span class="hero-card-name">${item}</span>
    </div>`).join('');

  state = {
    userOrder:   puzzle.categories.map(c => shuffle(c.order)),
    lockedItems: Array(4).fill(null).map(() => new Set()),
    catCorrect:  Array(4).fill(false),
    checksUsed:  0,
    pairSel:     [],
    pairLinked:  false,
    gameOver:    false,
  };

  updateProgress();
  renderPairPills();
  renderCats();
}

function updateProgress() {
  document.getElementById('progressPips').innerHTML =
    state.catCorrect.map((done,i) => `<div class="pip${done?' lit-'+i:''}"></div>`).join('');
  const used = state.checksUsed;
  document.getElementById('checkPips').innerHTML =
    Array.from({length:MAX_CHECKS}).map((_,i) =>
      `<div class="${i < used ? 'check-pip used' : 'check-pip remaining'}"></div>`
    ).join('');
  document.getElementById('pairPip').className = 'pair-pip' + (state.pairLinked ? ' lit' : '');
}

function renderPairPills() {
  const [pa,pb] = puzzle.matchingPair;
  document.getElementById('pairPills').innerHTML = puzzle.categories.map((cat,ci) => {
    const isLinked = state.pairLinked && (ci===pa || ci===pb);
    const isSel    = state.pairSel.includes(ci);
    let cls = `pair-pill pp${ci}`;
    if (isLinked) cls += ' linked-done';
    else if (isSel) cls += ' sel';
    const dis = (state.pairLinked || state.gameOver) ? 'disabled' : '';
    return `<button class="${cls}" onclick="togglePill(${ci})" ${dis}>${cat.label}</button>`;
  }).join('');
  document.getElementById('btnLink').disabled =
    state.pairSel.length !== 2 || state.pairLinked || state.gameOver;
}

function togglePill(ci) {
  if (state.pairLinked || state.gameOver) return;
  const idx = state.pairSel.indexOf(ci);
  if (idx > -1) state.pairSel.splice(idx,1);
  else if (state.pairSel.length < 2) state.pairSel.push(ci);
  else state.pairSel = [state.pairSel[1], ci];
  setPairMsg('Select two categories above','');
  document.getElementById('pairWrongReveal').classList.remove('show');
  renderPairPills();
}

function linkPair() {
  if (state.pairSel.length !== 2 || state.pairLinked || state.gameOver) return;
  const [a,b] = state.pairSel;
  const ua = state.userOrder[a].join(',');
  const ub = state.userOrder[b].join(',');

  // ‚îÄ‚îÄ FIX 1: orders don't need to match each other ‚Äî we check correctness directly
  // The two selected categories must each match the correct pair order
  const [pa,pb] = puzzle.matchingPair;
  const correct = (a===pa && b===pb) || (a===pb && b===pa);

  if (correct) {
    state.pairLinked = true;
    state.gameOver   = true;

    // ‚îÄ‚îÄ FIX 1 (continued): Auto-mark all correct categories even if Check wasn't used
    // If the pair orders in the user's arrangement match the correct order, award stars
    puzzle.categories.forEach((cat, ci) => {
      if (!state.catCorrect[ci]) {
        const userArr = state.userOrder[ci];
        const corrArr = cat.order;
        if (userArr.join(',') === corrArr.join(',')) {
          state.catCorrect[ci] = true;
        }
      }
    });

    updateProgress();
    setTimeout(() => showResults(true), 600);
  } else {
    state.gameOver = true;
    showWrongPairReveal(a, b);
    setPairMsg("Wrong pair ‚Äî game over!", 'err');
    shakePills([a,b]);
    state.pairSel = [];
    renderPairPills();
    setTimeout(() => showResults(false), 1800);
  }
}

function showWrongPairReveal(a, b) {
  const catA = puzzle.categories[a];
  const catB = puzzle.categories[b];
  const userA = state.userOrder[a];
  const userB = state.userOrder[b];
  const correctA = catA.order;
  const correctB = catB.order;

  function buildRow(catLabel, userOrder, correctOrder, catIdx) {
    const tiles = userOrder.map((item, pos) => {
      const wrong = correctOrder.indexOf(item) !== pos;
      return `<span class="pwt${wrong ? ' wrong' : ''}">${item}</span>${pos < userOrder.length-1 ? '<span class="pwr-arrow">‚Üí</span>' : ''}`;
    }).join('');
    return `<div class="pair-wrong-row">
      <div class="pair-wrong-label" style="color:${CAT_COLORS[catIdx]}">${catLabel}</div>
      <div class="pair-wrong-tiles">${tiles}</div>
    </div>`;
  }

  function getSwapHint(userA, correctA, userB, correctB) {
    const diffsA = userA.reduce((acc,item,i) => correctA.indexOf(item)!==i ? acc.concat(item) : acc, []);
    const diffsB = userB.reduce((acc,item,i) => correctB.indexOf(item)!==i ? acc.concat(item) : acc, []);
    const allDiffs = [...new Set([...diffsA,...diffsB])];
    if (allDiffs.length === 0) return '';
    return `üí° Tip: Items in the wrong position ‚Äî ${allDiffs.slice(0,2).join(' and ')} need moving`;
  }

  document.getElementById('pairWrongRows').innerHTML =
    buildRow(catA.label, userA, correctA, a) + buildRow(catB.label, userB, correctB, b);
  const hint = getSwapHint(userA, correctA, userB, correctB);
  const hintEl = document.getElementById('swapHint');
  hintEl.textContent = hint;
  hintEl.style.display = hint ? '' : 'none';
  document.getElementById('pairWrongReveal').classList.add('show');
}

function setPairMsg(text, type) {
  const el = document.getElementById('pairMsg');
  el.textContent = text;
  el.className = 'pair-msg' + (type ? ' '+type : '');
}

function shakePills(indices) {
  const btns = document.getElementById('pairPills').querySelectorAll('.pair-pill');
  indices.forEach(ci => {
    if (btns[ci]) {
      btns[ci].style.animation = 'shake 0.35s ease';
      setTimeout(() => { if(btns[ci]) btns[ci].style.animation = ''; }, 400);
    }
  });
}

// ‚îÄ‚îÄ‚îÄ RENDER CATEGORIES ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function renderCats() {
  const list = document.getElementById('catsList');
  list.innerHTML = '';
  puzzle.categories.forEach((cat, ci) => {
    const correct    = state.catCorrect[ci];
    const locked     = state.lockedItems[ci];
    const checksLeft = MAX_CHECKS - state.checksUsed;

    let checkLabel = correct ? '‚úì Correct' :
                     checksLeft > 0 ? `Check Order (${checksLeft} left)` : 'No checks left';

    const block = document.createElement('div');
    block.className = `cat-block b${ci}${correct ? ' correct' : ''}`;
    block.id = `cat-${ci}`;
    block.innerHTML = `
      <div class="cat-topbar"></div>
      <div class="cat-header">
        <div class="cat-header-left">
          <div class="cat-swatch"></div>
          <div>
            <div class="cat-name">${cat.label}</div>
            <div class="cat-desc">${cat.desc}</div>
          </div>
        </div>
        <div class="cat-header-right">
          <div class="star-slot${correct?' lit':''}">‚≠ê</div>
          <button class="btn-check${!correct&&checksLeft===0?' no-checks':''}" id="checkbtn-${ci}"
            ${correct||state.gameOver||checksLeft===0?'disabled':''} onclick="checkOrder(${ci})">
            ${checkLabel}
          </button>
        </div>
      </div>
      <div class="rank-row" id="rankrow-${ci}">
        ${state.userOrder[ci].map((item, ri) => {
          const isLocked = locked.has(item);
          const fm       = FACTS[pidx] && FACTS[pidx][ci];
          const fact     = fm ? (fm[item]||'') : '';
          const tileClass = isLocked ? 'rank-tile locked' : 'rank-tile';
          return `
          ${ri > 0 ? '<div class="rank-arrow">‚Üí</div>' : ''}
          <div class="rank-entry">
            <div class="rank-num">${ri+1}${['st','nd','rd','th'][ri]}</div>
            <div class="${tileClass}" data-ci="${ci}" data-ri="${ri}"${isLocked?' data-locked="1"':''}>${item}</div>
            <div class="item-fact${correct&&fact?' revealed':''}">
              ${fact}
            </div>
          </div>`;
        }).join('')}
      </div>`;
    list.appendChild(block);
    if (!correct && !state.gameOver) setupInteraction(ci);
  });
}

// ‚îÄ‚îÄ‚îÄ DRAG & DROP ‚Äî unified mouse + touch ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function setupInteraction(ci) {
  const row = document.getElementById(`rankrow-${ci}`);
  if (!row) return;

  let ghost = null;
  let fromRi = null;
  let activeTouch = null;
  let isDragging = false;
  let startX, startY;
  const DRAG_THRESHOLD = 8;

  function getTiles() { return Array.from(row.querySelectorAll('.rank-tile')); }

  function createGhost(text, x, y) {
    ghost = document.createElement('div');
    ghost.className = 'drag-ghost';
    ghost.textContent = text;
    document.body.appendChild(ghost);
    moveGhost(x, y);
  }

  function moveGhost(x, y) {
    if (!ghost) return;
    ghost.style.left = (x - ghost.offsetWidth/2) + 'px';
    ghost.style.top  = (y - ghost.offsetHeight/2) + 'px';
  }

  function removeGhost() {
    if (ghost) { ghost.remove(); ghost = null; }
  }

  function getTileAt(x, y) {
    const els = document.elementsFromPoint(x, y);
    return els.find(el => el.classList.contains('rank-tile') && parseInt(el.dataset.ci) === ci) || null;
  }

  function highlightTarget(targetTile) {
    getTiles().forEach(t => t.classList.remove('drag-over'));
    if (targetTile) targetTile.classList.add('drag-over');
  }

  function doSwap(toRi) {
    if (toRi === fromRi || toRi === null) return;
    const fromItem = state.userOrder[ci][fromRi];
    const toItem   = state.userOrder[ci][toRi];
    if (state.lockedItems[ci].has(fromItem) || state.lockedItems[ci].has(toItem)) return;
    [state.userOrder[ci][fromRi], state.userOrder[ci][toRi]] =
      [state.userOrder[ci][toRi], state.userOrder[ci][fromRi]];
    renderCats(); renderPairPills();
  }

  // ‚îÄ‚îÄ MOUSE EVENTS ‚îÄ‚îÄ
  getTiles().forEach(tile => {
    tile.addEventListener('mousedown', e => {
      if (e.button !== 0) return;
      fromRi = parseInt(tile.dataset.ri);
      startX = e.clientX; startY = e.clientY;
      isDragging = false;

      function onMouseMove(e) {
        const dx = e.clientX - startX, dy = e.clientY - startY;
        if (!isDragging && Math.sqrt(dx*dx+dy*dy) > DRAG_THRESHOLD) {
          isDragging = true;
          tile.classList.add('dragging');
          createGhost(tile.textContent.trim(), e.clientX, e.clientY);
        }
        if (isDragging) {
          moveGhost(e.clientX, e.clientY);
          const target = getTileAt(e.clientX, e.clientY);
          highlightTarget(target !== tile ? target : null);
        }
      }

      function onMouseUp(e) {
        document.removeEventListener('mousemove', onMouseMove);
        document.removeEventListener('mouseup', onMouseUp);
        if (isDragging) {
          tile.classList.remove('dragging');
          getTiles().forEach(t => t.classList.remove('drag-over'));
          removeGhost();
          const target = getTileAt(e.clientX, e.clientY);
          if (target && target !== tile) doSwap(parseInt(target.dataset.ri));
        }
        isDragging = false; fromRi = null;
      }

      document.addEventListener('mousemove', onMouseMove);
      document.addEventListener('mouseup', onMouseUp);
    });
  });

  // ‚îÄ‚îÄ TOUCH EVENTS ‚îÄ‚îÄ
  getTiles().forEach(tile => {
    tile.addEventListener('touchstart', e => {
      if (activeTouch !== null) return;
      activeTouch = e.touches[0].identifier;
      fromRi = parseInt(tile.dataset.ri);
      const t = e.touches[0];
      startX = t.clientX; startY = t.clientY;
      isDragging = false;
    }, {passive: true});

    tile.addEventListener('touchmove', e => {
      const touch = Array.from(e.touches).find(t => t.identifier === activeTouch);
      if (!touch) return;
      const dx = touch.clientX - startX, dy = touch.clientY - startY;
      if (!isDragging && Math.sqrt(dx*dx+dy*dy) > DRAG_THRESHOLD) {
        isDragging = true;
        tile.classList.add('dragging');
        createGhost(tile.textContent.trim(), touch.clientX, touch.clientY);
      }
      if (isDragging) {
        e.preventDefault();
        moveGhost(touch.clientX, touch.clientY);
        const target = getTileAt(touch.clientX, touch.clientY);
        highlightTarget(target && target !== tile ? target : null);
      }
    }, {passive: false});

    tile.addEventListener('touchend', e => {
      const changedTouch = Array.from(e.changedTouches).find(t => t.identifier === activeTouch);
      if (!changedTouch) return;
      activeTouch = null;
      if (isDragging) {
        tile.classList.remove('dragging');
        getTiles().forEach(t => t.classList.remove('drag-over'));
        removeGhost();
        const target = getTileAt(changedTouch.clientX, changedTouch.clientY);
        if (target && target !== tile) doSwap(parseInt(target.dataset.ri));
      }
      isDragging = false; fromRi = null;
    }, {passive: true});

    tile.addEventListener('touchcancel', () => {
      activeTouch = null; isDragging = false; fromRi = null;
      tile.classList.remove('dragging');
      getTiles().forEach(t => t.classList.remove('drag-over'));
      removeGhost();
    }, {passive: true});
  });
}

// ‚îÄ‚îÄ‚îÄ CHECK ORDER ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function checkOrder(ci) {
  if (state.catCorrect[ci] || state.gameOver) return;
  if (state.checksUsed >= MAX_CHECKS) return;

  state.checksUsed++;
  updateProgress();

  const correctOrder = puzzle.categories[ci].order;
  const userOrder    = state.userOrder[ci];

  let allCorrect = true;
  userOrder.forEach((item, ri) => {
    if (correctOrder[ri] === item) {
      state.lockedItems[ci].add(item);
    } else {
      allCorrect = false;
    }
  });

  if (allCorrect) {
    state.catCorrect[ci] = true;
    renderCats(); renderPairPills();
  } else {
    const block = document.getElementById(`cat-${ci}`);
    const btn   = document.getElementById(`checkbtn-${ci}`);
    block.classList.remove('wrong-flash'); void block.offsetWidth; block.classList.add('wrong-flash');
    btn.classList.add('is-wrong'); btn.textContent = '‚úó Some wrong';

    const remaining = MAX_CHECKS - state.checksUsed;
    showToast(remaining > 0
      ? `${remaining} check${remaining===1?'':'s'} remaining`
      : 'No more checks!');

    setTimeout(() => {
      block.classList.remove('wrong-flash');
      btn.classList.remove('is-wrong');
      renderCats(); renderPairPills();
    }, 700);
  }
}

function showToast(msg) {
  const t = document.getElementById('checksToast');
  t.textContent = msg;
  t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 2200);
}

// ‚îÄ‚îÄ‚îÄ BUILD ANSWERS ‚Äî with facts under each item ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function buildAnswers() {
  const [pa,pb] = puzzle.matchingPair;
  document.getElementById('answerRows').innerHTML = puzzle.categories.map((cat,ci) => {
    const isMatch = ci===pa || ci===pb;
    const fm = FACTS[pidx] && FACTS[pidx][ci];
    const pillsHTML = cat.order.map((item,i) => {
      const fact = fm ? (fm[item]||'') : '';
      return `
        ${i>0?'<span class="ans-arrow">‚Üí</span>':''}
        <div class="answer-pill-wrap">
          <span class="answer-item-pill">${item}</span>
          ${fact ? `<span class="answer-item-fact">${fact}</span>` : ''}
        </div>`;
    }).join('');

    return `<div class="answer-row-item">
      <div class="answer-cat-label" style="color:${CAT_COLORS[ci]}">
        ${cat.label}${isMatch?'<span class="match-flag">MATCH</span>':''}
      </div>
      <div class="answer-pills">${pillsHTML}</div>
    </div>`;
  }).join('');
}

// ‚îÄ‚îÄ‚îÄ RESULTS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function showResults(won) {
  state.gameOver = true;
  document.getElementById('heroSection').style.display  = 'none';
  document.getElementById('progressBar').style.display  = 'none';
  document.getElementById('pairBox').style.display      = 'none';
  document.getElementById('catsList').style.display     = 'none';
  document.querySelector('.footer').style.display       = 'none';

  const now     = new Date();
  const dateStr = now.toLocaleDateString('en-GB',{day:'numeric',month:'short',year:'numeric'});
  const checksUsed = state.checksUsed;

  if (won) {
    document.getElementById('failContent').style.display = 'none';
    document.getElementById('winContent').style.display  = '';
    document.getElementById('resultsStripe').classList.remove('fail');

    // ‚îÄ‚îÄ FIX 1: Stars = categories with correct order (checked OR auto-detected at link)
    const stars = state.catCorrect.filter(Boolean).length;
    const sr = document.getElementById('starsRow');
    sr.innerHTML = '';
    for (let i=0; i<4; i++) {
      const s = document.createElement('div');
      s.className = 'res-star';
      s.textContent = i < stars ? '‚≠ê' : '‚òÜ';
      s.style.animationDelay = (i*0.09)+'s';
      sr.appendChild(s);
    }
    document.getElementById('scoreLabel').textContent =
      `${stars}/4 categories correct ¬∑ ${checksUsed}/${MAX_CHECKS} checks used`;

    const shareText =
      `RANK 4 ‚Äî ${dateStr}\n` +
      `${'‚≠ê'.repeat(stars)}${'‚òÜ'.repeat(4-stars)} ${stars}/4\n` +
      `Checks used: ${checksUsed}/${MAX_CHECKS}\n` +
      `Matching pair: ‚úì Found!\n` +
      `Play at ${WEBSITE_URL} #Rank4`;
    document.getElementById('shareBox').textContent = shareText;
    document.getElementById('btnCopy').onclick = () => {
      navigator.clipboard.writeText(shareText).catch(()=>{});
      document.getElementById('btnCopy').textContent = 'Copied! ‚úì';
      setTimeout(() => document.getElementById('btnCopy').textContent = 'Copy Result', 1800);
    };

  } else {
    document.getElementById('winContent').style.display  = 'none';
    document.getElementById('failContent').style.display = '';
    document.getElementById('resultsStripe').classList.add('fail');

    const [pa,pb] = puzzle.matchingPair;
    document.getElementById('failSub').innerHTML =
      `The correct matching pair was<br><strong style="color:rgba(255,255,255,0.85)">${puzzle.categories[pa].label} & ${puzzle.categories[pb].label}</strong><br>Come back tomorrow for a new puzzle!`;

    const shareText =
      `RANK 4 ‚Äî ${dateStr}\n` +
      `‚ùå Wrong pair guessed\n` +
      `Checks used: ${checksUsed}/${MAX_CHECKS}\n` +
      `Play at ${WEBSITE_URL} #Rank4`;
    document.getElementById('shareBoxFail').textContent = shareText;
    document.getElementById('btnCopyFail').onclick = () => {
      navigator.clipboard.writeText(shareText).catch(()=>{});
      document.getElementById('btnCopyFail').textContent = 'Copied! ‚úì';
      setTimeout(() => document.getElementById('btnCopyFail').textContent = 'Copy Result', 1800);
    };
  }

  buildAnswers();
  document.getElementById('resultsScreen').classList.add('show');
  document.getElementById('resultsScreen').scrollIntoView({behavior:'smooth'});
}

// ‚îÄ‚îÄ‚îÄ BOOT ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
document.getElementById('btnLink').addEventListener('click', linkPair);
document.getElementById('btnHelp').addEventListener('click', () =>
  document.getElementById('helpOverlay').classList.add('show'));

initGame();
setTimeout(() => document.getElementById('helpOverlay').classList.add('show'), 400);
</script>
</body>
</html>
